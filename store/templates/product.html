<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{{ product.title }}</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:0;color:#0b0b0b}
    header{padding:1rem 1.5rem;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}
    main{max-width:1200px;margin:2rem auto;padding:0 1.5rem}
    .two-col{display:grid;grid-template-columns:1fr 1fr;gap:3rem;align-items:start}
    @media(max-width:768px){.two-col{grid-template-columns:1fr}}
    .hero-img{width:100%;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
    .content h1{margin:0 0 1rem;font-size:2rem}
    .content p{font-size:1.1rem;color:#333;line-height:1.6;margin-bottom:2rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}
    .card{border:1px solid #ddd;border-radius:8px;padding:1rem;transition:border-color .2s}
    .card:has(input:checked){border-color:#111;background:#f9f9f9}
    .price{font-size:1.5rem;font-weight:700;margin:.5rem 0}
    .cta{background:#111;color:#fff;border:none;border-radius:8px;padding:.85rem 1.5rem;cursor:pointer;width:100%;font-size:1.05rem;font-weight:600}
    .cta:hover{background:#000}
    input,button{font-size:1rem}
    label{display:block;margin:.5rem 0;cursor:pointer}
    .muted{color:#666;font-size:.9rem}
    input[type=email]{width:100%;padding:.7rem;border-radius:6px;border:1px solid #ccc;margin-top:.5rem}
  </style>
</head>
<body>
<header>
  <strong>{{ product.title }}</strong>
  <nav><a href="https://login.scideology.app/auth/login?target=https://scideology.app">Login</a></nav>
</header>
<main>
  <div class="two-col">
    <div>
      {% if product.hero_image %}
      <img src="{{ product.hero_image }}" alt="{{ product.title }}" class="hero-img"/>
      {% endif %}
    </div>
    <div class="content">
      <h1>{{ product.title }}</h1>
      <p>{{ product.description }}</p>
      <form method="post" action="/checkout">
    <div class="grid">
      {% for key,t in tiers.items() %}
      <div class="card">
        <label><input type="radio" name="tier" value="{{ key }}" {% if loop.first %}checked{% endif %}> <strong>{{ t.name }}</strong></label>
        <div class="price">${{ "%.2f"|format(t.price/100) }}</div>
        <p class="muted">{{ t.description }}</p>
      </div>
      {% endfor %}
    </div>
        <label>Email (for receipt):
          <input type="email" name="email" placeholder="you@example.com" required />
        </label>
        <p class="muted">Secure checkout powered by Square. You will be redirected to complete payment.</p>
        <button class="cta" type="submit">Proceed to Checkout</button>
      </form>
    </div>
  </div>

  {% if product.details_html %}
  <section style="max-width:1200px;margin:3rem auto;padding:0 1.5rem">
    <h2 style="font-size:1.75rem;margin-bottom:1rem">Details</h2>
    <div class="details-content">
      {{ product.details_html|safe }}
    </div>
  </section>
  {% endif %}

  {% if product.faq_html %}
  <section style="max-width:1200px;margin:3rem auto;padding:0 1.5rem">
    <h2 style="font-size:1.75rem;margin-bottom:1rem">FAQ</h2>
    <div class="faq-content">
      {{ product.faq_html|safe }}
    </div>
  </section>
  {% endif %}
</main>

{% if product.cookies_notice_html %}
<div id="cookies-notice" style="position:fixed;bottom:0;left:0;right:0;background:#333;color:#fff;padding:1rem 1.5rem;display:none;align-items:center;justify-content:space-between;z-index:1000">
  <div style="flex:1">
    {{ product.cookies_notice_html|safe }}
  </div>
  <div style="display:flex;gap:.5rem;margin-left:1rem">
    <button onclick="document.getElementById('cookies-notice').style.display='none';localStorage.setItem('cookies-accepted','false')" style="background:transparent;color:#fff;border:1px solid #fff;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:600">Reject</button>
    <button onclick="document.getElementById('cookies-notice').style.display='none';localStorage.setItem('cookies-accepted','true')" style="background:#fff;color:#333;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:600">Accept</button>
  </div>
</div>
<script>
  if (!localStorage.getItem('cookies-accepted')) {
    document.getElementById('cookies-notice').style.display='flex';
  }
</script>
{% endif %}

</body>
</html>
